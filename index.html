<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>carousel</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">

  </head>
  <body class="ms-controller" ms-controller="carousel">
    <div class="carousel">
      <ul class="img-container">
        <li ms-class="@cur == idx ? 'on' : ''" ms-for="(idx, item) in @imgsList">
          <img ms-attr="{src: item.url}">
        </li>
      </ul>
      <ul class="img-idx-spot">
        <li ms-class="@cur == idx ? 'actives' : ''" ms-for="(idx, item) in @imgsList" :click="jump(idx)"></li>
      </ul>
      <!-- <a :click="@left">left</a> -->
    </div>
    <script src="https://cdn.bootcss.com/avalon.js/2.2.4/avalon.min.js"></script>
    <script>
      avalon.ready(function() {
        var vm = avalon.define({
          $id: 'carousel',
          cur: 1,
          move: false,
          imgsList: [{
            url: './imgs/01.jpg'
          }, {
            url: './imgs/02.jpg'
          }, {
            url: './imgs/03.jpg'
          }],
          "initCarousel": function() {
            vm.cur = vm.imgsList.length
          },
          "left": function() {
            vm.move = !vm.move
          },
          "loop": function() {
            var cur = vm.imgsList.length
            if (vm.cur) {
              vm.cur--
            } else {
              vm.cur = cur
            }
          },
          "jump": function(idx) {
            vm.cur = idx
          },
        })
        setInterval(function() {
          vm.loop()
        }, 3000)
        avalon.scan(document.body)
      })
    </script>
  </body>
</html>
